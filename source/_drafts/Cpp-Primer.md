---
title: Cpp Primer
---

### **建议**

1. 在 C++中几乎不需要用宏，用 `const` 或 `enum` 定义显式的常量，用 `inline` 避免函数调用的额外开销，用模板去刻画一族函数或类型，用 `namespace` 去避免命名冲突。
2. 不要在你需要变量之前去声明，以保证你能立即对它进行初始化。
3. 不要用 `malloc`,`new` 运算会做的更好。
4. 避免使用 `void*`、指针算术、联合和强制，大多数情况下，强制都是设计错误的指示器。
5. 尽量少用`数组`和` C `风格的字符串，标准库中的` string` 和 `vector `可以简化程序。
6. 更加重要的是，试着将程序考虑为一组由`类和对象`表示的相互作用的概念，而不是一堆数据结构和一些可以拨弄的二进制。

### 文件重定向($P_19$)

- 在编译好的`.exe`文件拷贝到`数据`目录下, 执行`$ EXEFilename <infile>output.txt`

### 函数重载的底层实现

> `Name Mangling`是一种在编译过程中，将函数、变量的名称重新改编的机制，简单来说就是编译器为了区分各个函数，将函数通过一定算法，重新修饰为一个全局唯一的名称。

- `C++`利用name mangling(倾轧)技术将函数重命名, 区分参数不同的同名函数

- 倾轧技术发生在`.cpp`文件的编译阶段, 即将编译输出文件中的函数根据一定的规则重命名; 和`.h`文件的声明阶段, 在头文件中声明的函数也要重命名, 很显然, 如果只有其中的一个阶段发生倾轧, 那么在链接时就会出现函数未定义的错误

- 注意:C++完全兼容C语言，那就面临着，`完全兼容C的类库`。由`.c 文件`的类库文件中函数名并没有发生name mangling 行为，而我们在`.cpp文件中`包含`.c 文件所对应的.h 文件`时，`.h 文件`要发生name manling 行为，因而会发生在`链接的时候`的错误。
- C++为了避免上述错误的发生，重载了关键字` extern`。要避免 name manling的函数前，加 `extern "C"` 如有多个函数声明要避免，则放入` extern "C"{}`
     
### 引用

- 需求 :　进行参数的传递
- 本质 :　引用是个特殊的指针, 对指针的包装，扩展了指针的作用域，　不会暴露地址，　也不必开辟地址空间

- 变量名，本身是一段内存的引用, 是为己有变量起一个别名
- 引用没有定义，是一种关系型声明, 类型与原类型保持一致，且不分配内存, 被引用的变量有相同的地址
- 必须初始化, 一经初始化, 该引用不可变更
- 可以对引用再次建立引用，也就是某一变量可以具有多个别名, 但是不能破坏原有的引用关系
- 重载`&`符号:前面有数据类型时是引用, 其它皆为取地址
- 可以定义指针的引用`int* &ref`, 不能定义引用的引用`int&& ref`
- 可以定义指针的指针`int** val`, 不能定义引用的指针`int& *ref`
- 可以定义数组的引用`int (&arr)[3]=数组名`, 不能定义引用数组`int& refArr[] = {}`,但是可以定义指针数组`int* arr[]={存放指针变量}`
- 当`const`修饰的时候, 引用就开辟了一块未命名的空间

### 类

- 本质:类名本质上就是一个命名空间

 

 